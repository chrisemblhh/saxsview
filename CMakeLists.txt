cmake_minimum_required (VERSION 2.6)
project (SAXSVIEW C CXX Fortran)

set (CMAKE_VERBOSE_MAKEFILE  OFF)
set (CMAKE_BUILD_TYPE        DEBUG)

if (WIN32)
  add_definitions (-DQT_DLL)

  set (MINGW_LINKER_FLAGS "-Wl,--enable-auto-import -Wl,--enable-runtime-pseudo-reloc -Wl,--allow-multiple-definition")
  set (CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} ${MINGW_LINKER_FLAGS}")
  set (CMAKE_MODULE_LINKER_FLAGS "${CMAKE_MODULE_LINKER_FLAGS} ${MINGW_LINKER_FLAGS}")
  set (CMAKE_EXE_LINKER_FLAGS    "${CMAKE_EXE_LINKER_FLAGS} ${MINGW_LINKER_FLAGS}")
endif(WIN32)

find_package (Qt4 4.4.0)
set (QT_USE_QTSVG TRUE)
include (${QT_USE_FILE})

set (CPACK_PACKAGE_NAME                "saxsview")
set (CPACK_PACKAGE_CONTACT             "dfranke@users.sourceforge.net")
set (CPACK_PACKAGE_DESCRIPTION_SUMMARY "libsaxsdocument and saxsview; read, convert and view 1D and 2D-files related to Small Angle X-ray Scattering (SAXS).")
set (CPACK_PACKAGE_VERSION             "0.2.0")
set (CPACK_PACKAGE_VERSION_MAJOR       "0")
set (CPACK_PACKAGE_VERSION_MINOR       "2")
set (CPACK_PACKAGE_VERSION_PATCH       "0")
set (CPACK_PACKAGE_FILE_NAME           "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION}")
set (CPACK_SOURCE_PACKAGE_FILE_NAME    "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION}")
set (CPACK_SOURCE_GENERATOR            "TGZ" "ZIP")
set (CPACK_SOURCE_IGNORE_FILES         "/.svn/;/build/;")
set (CPACK_RESOURCE_FILE_LICENSE       "${SAXSVIEW_SOURCE_DIR}/COPYING")
INCLUDE (CPack)

add_subdirectory (external/qwt)
add_subdirectory (external/cbflib)
add_subdirectory (libsaxsdocument)
add_subdirectory (libsaxsimage)
add_subdirectory (libsaxsview)
add_subdirectory (saxsview)

ENABLE_TESTING()
add_subdirectory (testsuite)
